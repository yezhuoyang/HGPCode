<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HyperGraph Product QLDPC Code Playground</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <h1>HyperGraph Product QLDPC Code Playground</h1>
        <p class="subtitle">Interactive visualization for quantum error correction codes</p>
    </header>

    <main>
        <!-- Matrix Input Section -->
        <section class="input-section">
            <div class="matrix-panel">
                <h2>Classical Code C<sub>1</sub></h2>
                <div class="input-controls">
                    <label>
                        Preset:
                        <select id="preset1">
                            <option value="custom">Custom</option>
                            <option value="rep3" selected>Repetition [3,1,3]</option>
                            <option value="hamming74">Hamming [7,4,3]</option>
                            <option value="simple42">Simple [4,2,2]</option>
                        </select>
                    </label>
                    <div class="size-controls">
                        <label>
                            Rows (r):
                            <input type="number" id="rows1" min="1" max="10" value="2">
                        </label>
                        <label>
                            Cols (n):
                            <input type="number" id="cols1" min="1" max="10" value="3">
                        </label>
                        <button id="resize1-btn" class="small-btn">Resize</button>
                    </div>
                </div>
                <div class="matrix-input">
                    <label>Parity Check Matrix H<sub>1</sub>:</label>
                    <textarea id="matrix1-text" rows="3" placeholder="Enter matrix rows separated by semicolons&#10;e.g., 1,1,0;0,1,1">1,1,0;0,1,1</textarea>
                    <div class="matrix-grid-container">
                        <div id="matrix1-grid" class="matrix-grid"></div>
                    </div>
                </div>
                <div class="code-params" id="params1"></div>
            </div>

            <div class="matrix-panel">
                <h2>Classical Code C<sub>2</sub></h2>
                <div class="input-controls">
                    <label>
                        Preset:
                        <select id="preset2">
                            <option value="custom">Custom</option>
                            <option value="rep3" selected>Repetition [3,1,3]</option>
                            <option value="hamming74">Hamming [7,4,3]</option>
                            <option value="simple42">Simple [4,2,2]</option>
                        </select>
                    </label>
                    <div class="size-controls">
                        <label>
                            Rows (r):
                            <input type="number" id="rows2" min="1" max="10" value="2">
                        </label>
                        <label>
                            Cols (n):
                            <input type="number" id="cols2" min="1" max="10" value="3">
                        </label>
                        <button id="resize2-btn" class="small-btn">Resize</button>
                    </div>
                </div>
                <div class="matrix-input">
                    <label>Parity Check Matrix H<sub>2</sub>:</label>
                    <textarea id="matrix2-text" rows="3" placeholder="Enter matrix rows separated by semicolons&#10;e.g., 1,1,0;0,1,1">1,1,0;0,1,1</textarea>
                    <div class="matrix-grid-container">
                        <div id="matrix2-grid" class="matrix-grid"></div>
                    </div>
                </div>
                <div class="code-params" id="params2"></div>
            </div>
        </section>

        <!-- Classical Tanner Graphs Section -->
        <section class="tanner-section">
            <div class="tanner-panel">
                <h3>Tanner Graph of C<sub>1</sub></h3>
                <div class="tanner-container">
                    <canvas id="tanner1-canvas" width="400" height="250"></canvas>
                </div>
                <div class="tanner-legend">
                    <span class="legend-item"><span class="legend-color bit-node"></span> Bit nodes (n)</span>
                    <span class="legend-item"><span class="legend-color check-node"></span> Check nodes (r)</span>
                </div>
            </div>
            <div class="tanner-panel">
                <h3>Tanner Graph of C<sub>2</sub></h3>
                <div class="tanner-container">
                    <canvas id="tanner2-canvas" width="400" height="250"></canvas>
                </div>
                <div class="tanner-legend">
                    <span class="legend-item"><span class="legend-color bit-node"></span> Bit nodes (n)</span>
                    <span class="legend-item"><span class="legend-color check-node"></span> Check nodes (r)</span>
                </div>
            </div>
        </section>

        <!-- Generate Button -->
        <section class="action-section">
            <button id="generate-btn" class="primary-btn">Generate HGP Code</button>
            <div id="hgp-params" class="hgp-params"></div>
        </section>

        <!-- Visualization Section -->
        <section class="visualization-section">
            <div class="viz-header">
                <h2>HGP Code Visualization</h2>
                <div class="viz-controls">
                    <label>
                        Error Type:
                        <select id="error-type">
                            <option value="X">X Error (bit flip)</option>
                            <option value="Z">Z Error (phase flip)</option>
                        </select>
                    </label>
                    <button id="clear-errors-btn" class="secondary-btn">Clear All Errors</button>
                </div>
            </div>
            <div class="viz-container">
                <canvas id="hgp-canvas" width="1200" height="600"></canvas>
            </div>
            <div class="legend">
                <div class="legend-item">
                    <span class="legend-color bit-node"></span>
                    <span>Bit Node (C₁/C₂)</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color check-node"></span>
                    <span>Check Node (C₁/C₂)</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color qubit-block"></span>
                    <span>Qubits (n₁n₂ + r₁r₂)</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color x-check"></span>
                    <span>X-Stabilizer (top-left)</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color z-check"></span>
                    <span>Z-Stabilizer (bottom-right)</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color error"></span>
                    <span>Error on Qubit</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color syndrome"></span>
                    <span>Triggered Syndrome</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color highlight-edge"></span>
                    <span>Highlighted Edge (error propagation)</span>
                </div>
            </div>
        </section>

        <!-- Info Section -->
        <section class="info-section">
            <h3>How to Use</h3>
            <ol>
                <li>Define two classical linear codes by their parity check matrices (use presets or enter custom matrices)</li>
                <li>Click "Generate HGP Code" to construct the hypergraph product code</li>
                <li>Click on qubits in the visualization to add errors</li>
                <li>Observe how syndromes (yellow highlights) indicate which checks detect the errors</li>
            </ol>
            <h3>About HGP Codes</h3>
            <p>
                The Hypergraph Product (HGP) construction combines two classical linear codes C<sub>1</sub> and C<sub>2</sub>
                to create a quantum LDPC code. Given parity check matrices H<sub>1</sub> (r<sub>1</sub> x n<sub>1</sub>) and
                H<sub>2</sub> (r<sub>2</sub> x n<sub>2</sub>), the resulting quantum code has:
            </p>
            <ul>
                <li><strong>N = n<sub>1</sub>n<sub>2</sub> + r<sub>1</sub>r<sub>2</sub></strong> physical qubits</li>
                <li><strong>K = k<sub>1</sub>k<sub>2</sub></strong> logical qubits (where k<sub>i</sub> = n<sub>i</sub> - r<sub>i</sub>)</li>
                <li><strong>D = min(d<sub>1</sub>, d<sub>2</sub>)</strong> code distance</li>
            </ul>
        </section>
    </main>

    <footer>
        <p>HGP QLDPC Code Playground | <a href="https://github.com" target="_blank">GitHub</a></p>
    </footer>

    <script src="js/matrix.js"></script>
    <script src="js/hgp.js"></script>
    <script src="js/visualization.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
